<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Midas â€¢ Unsubscribe</title>
    <style>
      body { font-family: Inter, Arial, sans-serif; margin: 0; background: #111827; color: #f3f4f6; }
      .card { max-width: 480px; margin: 80px auto; background: #1f2937; padding: 24px; border-radius: 12px; }
      input, select, button { width: 100%; padding: 10px; margin-top: 12px; border-radius: 8px; border: none; }
      button { background: #c9a227; color: #111827; font-weight: 600; cursor: pointer; }
    </style>
  </head>
  <body>
    <div class="card">
      <h2>Unsubscribe from Midas outreach</h2>
      <p>You can opt out instantly and tell us why.</p>
      <select id="reason">
        <option>Not relevant</option>
        <option>Too frequent</option>
        <option>Already solved</option>
        <option>Prefer another channel</option>
      </select>
      <button onclick="submitOptOut()">Confirm unsubscribe</button>
      <p id="status"></p>
    </div>
    <script>
      async function submitOptOut() {
        const reason = document.getElementById('reason').value;
        const res = await fetch(`/api/opt-out/{{ lead_id }}?reason=${encodeURIComponent(reason)}`, { method: 'POST' });
        document.getElementById('status').textContent = res.ok ? 'You have been unsubscribed.' : 'Unable to unsubscribe.';
      }
    </script>
  </body>
</html>
